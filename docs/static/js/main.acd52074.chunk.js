(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(t,e,n){t.exports=n(28)},22:function(t,e,n){},24:function(t,e,n){},26:function(t,e,n){},28:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(11),c=n.n(r),i=(n(22),n(1)),s=n(2),u=n(4),h=n(3),l=n(5),f=n(6),d=n(12),m=(n(24),function(t){function e(){var t,n;Object(i.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(o)))).touchStartX=0,n.touchStartY=0,n.touchCurrX=0,n.touchCurrY=0,n.touchStart=function(t){var e=t.touches[0],a=e.clientX,o=e.clientY;n.touchStartX=a,n.touchStartY=o},n.touchMove=function(t){var e=t.touches[0],a=e.clientX,o=e.clientY;n.touchCurrX=a,n.touchCurrY=o},n.touchEnd=function(t){var e=n.touchCurrX-n.touchStartX,a=n.touchCurrY-n.touchStartY,o="none";o=Math.abs(e)>Math.abs(a)?e<0?"left":"right":a<0?"up":"down",n.props.swipe(o)},n}return Object(l.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:this.props.className,onTouchStart:this.touchStart,onTouchMove:this.touchMove,onTouchEnd:this.touchEnd},this.props.children)}}]),e}(a.Component)),g=36,v=64,p=function(t){function e(){var t,n;Object(i.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(o)))).state={snake:[{x:Math.floor(Math.random()*g),y:Math.floor(Math.random()*v)}],direction:"up",food:{x:Math.floor(Math.random()*g),y:Math.floor(Math.random()*v)},score:0,gameState:"running"},n.timer=null,n.swipe=function(t){switch(t){case"up":"down"!==n.state.direction&&n.setState({direction:t});break;case"down":"up"!==n.state.direction&&n.setState({direction:t});break;case"left":"right"!==n.state.direction&&n.setState({direction:t});break;case"right":"left"!==n.state.direction&&n.setState({direction:t})}},n.isSnake=function(t,e){return n.state.snake.find(function(n){return n.x===t&&n.y===e})},n.getBlockColor=function(t,e){return n.isSnake(t,e)?" snake":t===n.state.food.x&&e===n.state.food.y?" food":""},n.returnToStart=function(){n.props.gameover(n.state.score)},n}return Object(l.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.timer=setInterval(function(){var e=Object(d.a)({},t.state),n=Object.assign({},t.state.snake[0]);switch(t.state.direction){case"up":n.y=(n.y-1+v)%v;break;case"right":n.x=(n.x+1)%g;break;case"down":n.y=(n.y+1)%v;break;case"left":n.x=(n.x-1+g)%g}if(t.isSnake(n.x,n.y))return clearInterval(t.timer),void t.setState({gameState:"gameover"});var a=!1;if(n.x===e.food.x&&n.y===e.food.y?(a=!0,e.snake=[n].concat(Object(f.a)(e.snake))):e.snake=[n].concat(Object(f.a)(e.snake.slice(0,e.snake.length-1))),a){do{e.food.x=Math.floor(Math.random()*g),e.food.y=Math.floor(Math.random()*v)}while(t.isSnake(e.food.x,e.food.y));e.score++}t.setState(e)},this.props.interval)}},{key:"render",value:function(){var t=this,e=Array(v).fill(Array(g).fill(0));return o.a.createElement(m,{className:"Game",swipe:this.swipe},o.a.createElement("h2",{className:"heading"},"Score: ".concat(this.state.score)),e.map(function(e,n){return o.a.createElement("div",{className:"row"},e.map(function(e,a){return o.a.createElement("div",{className:"block"+t.getBlockColor(a,n)})}))}),this.props.debug&&o.a.createElement("pre",null,JSON.stringify(this.state,null,2)),"gameover"===this.state.gameState&&o.a.createElement("h1",{className:"overlay",onClick:this.returnToStart},"Game over"))}}]),e}(a.Component),k=(n(26),function(t){var e=t.startGame,n=t.highScore;return o.a.createElement("div",{className:"StartScreen"},o.a.createElement("h1",null,"Snakes on a Phone"),o.a.createElement("p",null,"High Score: ",n),o.a.createElement("button",{onClick:e},"Start"))}),w=function(t){function e(){var t,n;Object(i.a)(this,e);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(o)))).state={screen:"start",highscore:0},n.startGame=function(){return n.setState({screen:"game"})},n.gameOver=function(t){var e=Math.max(t,n.state.highscore);n.setState({screen:"start",highscore:e}),localStorage.setItem("highscore",e)},n}return Object(l.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.setState({highscore:localStorage.getItem("highscore")||0})}},{key:"render",value:function(){switch(this.state.screen){default:case"start":return o.a.createElement(k,{startGame:this.startGame,highScore:this.state.highscore});case"game":return o.a.createElement(p,{interval:100,debug:!1,gameover:this.gameOver})}}}]),e}(a.Component),S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function b(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}c.a.render(o.a.createElement(w,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/snakes-on-a-phone",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/snakes-on-a-phone","/service-worker.js");S?(function(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):b(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):b(t)})}}(),document.ontouchmove=function(t){t.preventDefault()}}},[[13,2,1]]]);
//# sourceMappingURL=main.acd52074.chunk.js.map